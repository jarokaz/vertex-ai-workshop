{"displayName": "covertype-continuous-training", "labels": {"tfx_py_version": "3-7", "tfx_runner": "kubeflow_v2", "tfx_version": "1-0-0-rc1"}, "pipelineSpec": {"components": {"DataTransformer": {"executorLabel": "DataTransformer_executor", "inputDefinitions": {"artifacts": {"examples": {"artifactType": {"instanceSchema": "title: tfx.Examples\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  version:\n    type: integer\n    description: Version for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}, "schema": {"artifactType": {"instanceSchema": "title: tfx.Schema\ntype: object\n"}}}, "parameters": {"custom_config": {"type": "STRING"}, "disable_statistics": {"type": "INT"}, "force_tf_compat_v1": {"type": "INT"}, "module_file": {"type": "STRING"}}}, "outputDefinitions": {"artifacts": {"post_transform_anomalies": {"artifactType": {"instanceSchema": "title: tfx.ExampleAnomalies\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}, "post_transform_schema": {"artifactType": {"instanceSchema": "title: tfx.Schema\ntype: object\n"}}, "post_transform_stats": {"artifactType": {"instanceSchema": "title: tfx.ExampleStatistics\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}, "pre_transform_schema": {"artifactType": {"instanceSchema": "title: tfx.Schema\ntype: object\n"}}, "pre_transform_stats": {"artifactType": {"instanceSchema": "title: tfx.ExampleStatistics\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}, "transform_graph": {"artifactType": {"instanceSchema": "title: tfx.TransformGraph\ntype: object\n"}}, "transformed_examples": {"artifactType": {"instanceSchema": "title: tfx.Examples\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  version:\n    type: integer\n    description: Version for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}, "updated_analyzer_cache": {"artifactType": {"instanceSchema": "title: tfx.TransformCache\ntype: object\n"}}}}}, "ExampleValidator": {"executorLabel": "ExampleValidator_executor", "inputDefinitions": {"artifacts": {"schema": {"artifactType": {"instanceSchema": "title: tfx.Schema\ntype: object\n"}}, "statistics": {"artifactType": {"instanceSchema": "title: tfx.ExampleStatistics\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}}, "parameters": {"exclude_splits": {"type": "STRING"}}}, "outputDefinitions": {"artifacts": {"anomalies": {"artifactType": {"instanceSchema": "title: tfx.ExampleAnomalies\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}}}}, "ModelEvaluator": {"executorLabel": "ModelEvaluator_executor", "inputDefinitions": {"artifacts": {"examples": {"artifactType": {"instanceSchema": "title: tfx.Examples\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  version:\n    type: integer\n    description: Version for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}, "model": {"artifactType": {"instanceSchema": "title: tfx.Model\ntype: object\n"}}}, "parameters": {"eval_config": {"type": "STRING"}, "example_splits": {"type": "STRING"}}}, "outputDefinitions": {"artifacts": {"blessing": {"artifactType": {"instanceSchema": "title: tfx.ModelBlessing\ntype: object\n"}}, "evaluation": {"artifactType": {"instanceSchema": "title: tfx.ModelEvaluation\ntype: object\n"}}}}}, "Pusher": {"executorLabel": "Pusher_executor", "inputDefinitions": {"artifacts": {"model": {"artifactType": {"instanceSchema": "title: tfx.Model\ntype: object\n"}}, "model_blessing": {"artifactType": {"instanceSchema": "title: tfx.ModelBlessing\ntype: object\n"}}}, "parameters": {"custom_config": {"type": "STRING"}, "push_destination": {"type": "STRING"}}}, "outputDefinitions": {"artifacts": {"pushed_model": {"artifactType": {"instanceSchema": "title: tfx.PushedModel\ntype: object\n"}}}}}, "SchemaGen": {"executorLabel": "SchemaGen_executor", "inputDefinitions": {"artifacts": {"statistics": {"artifactType": {"instanceSchema": "title: tfx.ExampleStatistics\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}}, "parameters": {"exclude_splits": {"type": "STRING"}, "infer_feature_shape": {"type": "INT"}}}, "outputDefinitions": {"artifacts": {"schema": {"artifactType": {"instanceSchema": "title: tfx.Schema\ntype: object\n"}}}}}, "SchemaImporter": {"executorLabel": "SchemaImporter_executor", "inputDefinitions": {"parameters": {"artifact_uri": {"type": "STRING"}, "reimport": {"type": "INT"}}}, "outputDefinitions": {"artifacts": {"result": {"artifactType": {"instanceSchema": "title: tfx.Schema\ntype: object\n"}}}}}, "StatisticsGen": {"executorLabel": "StatisticsGen_executor", "inputDefinitions": {"artifacts": {"examples": {"artifactType": {"instanceSchema": "title: tfx.Examples\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  version:\n    type: integer\n    description: Version for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}}, "parameters": {"exclude_splits": {"type": "STRING"}}}, "outputDefinitions": {"artifacts": {"statistics": {"artifactType": {"instanceSchema": "title: tfx.ExampleStatistics\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}}}}, "TrainDataGen": {"executorLabel": "TrainDataGen_executor", "inputDefinitions": {"parameters": {"input_base": {"type": "STRING"}, "input_config": {"type": "STRING"}, "output_config": {"type": "STRING"}, "output_data_format": {"type": "INT"}}}, "outputDefinitions": {"artifacts": {"examples": {"artifactType": {"instanceSchema": "title: tfx.Examples\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  version:\n    type: integer\n    description: Version for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}}}}, "Trainer": {"executorLabel": "Trainer_executor", "inputDefinitions": {"artifacts": {"examples": {"artifactType": {"instanceSchema": "title: tfx.Examples\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  version:\n    type: integer\n    description: Version for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}, "schema": {"artifactType": {"instanceSchema": "title: tfx.Schema\ntype: object\n"}}, "transform_graph": {"artifactType": {"instanceSchema": "title: tfx.TransformGraph\ntype: object\n"}}}, "parameters": {"custom_config": {"type": "STRING"}, "eval_args": {"type": "STRING"}, "module_file": {"type": "STRING"}, "train_args": {"type": "STRING"}}}, "outputDefinitions": {"artifacts": {"model": {"artifactType": {"instanceSchema": "title: tfx.Model\ntype: object\n"}}, "model_run": {"artifactType": {"instanceSchema": "title: tfx.ModelRun\ntype: object\n"}}}}}}, "deploymentSpec": {"executors": {"DataTransformer_executor": {"container": {"args": ["--executor_class_path", "tfx.components.transform.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/jk-wst1/tfxcovertype"}}, "ExampleValidator_executor": {"container": {"args": ["--executor_class_path", "tfx.components.example_validator.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/jk-wst1/tfxcovertype"}}, "ModelEvaluator_executor": {"container": {"args": ["--executor_class_path", "tfx.components.evaluator.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/jk-wst1/tfxcovertype"}}, "Pusher_executor": {"container": {"args": ["--executor_class_path", "tfx.components.pusher.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/jk-wst1/tfxcovertype"}}, "SchemaGen_executor": {"container": {"args": ["--executor_class_path", "tfx.components.schema_gen.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/jk-wst1/tfxcovertype"}}, "SchemaImporter_executor": {"importer": {"artifactUri": {"constantValue": {"stringValue": "gs://jkwst1-bucket/tfx/schema"}}, "typeSchema": {"instanceSchema": "title: tfx.Schema\ntype: object\n"}}}, "StatisticsGen_executor": {"container": {"args": ["--executor_class_path", "tfx.components.statistics_gen.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/jk-wst1/tfxcovertype"}}, "TrainDataGen_executor": {"container": {"args": ["--executor_class_path", "tfx.components.example_gen.csv_example_gen.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/jk-wst1/tfxcovertype", "lifecycle": {"preCacheCheck": {"args": ["--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.file_based_example_gen.driver"]}}}}, "Trainer_executor": {"container": {"args": ["--executor_class_path", "tfx.components.trainer.executor.GenericExecutor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/jk-wst1/tfxcovertype"}}}}, "pipelineInfo": {"name": "covertype-continuous-training"}, "root": {"dag": {"tasks": {"DataTransformer": {"componentRef": {"name": "DataTransformer"}, "dependentTasks": ["SchemaImporter", "TrainDataGen"], "inputs": {"artifacts": {"examples": {"taskOutputArtifact": {"outputArtifactKey": "examples", "producerTask": "TrainDataGen"}}, "schema": {"taskOutputArtifact": {"outputArtifactKey": "result", "producerTask": "SchemaImporter"}}}, "parameters": {"custom_config": {"runtimeValue": {"constantValue": {"stringValue": "null"}}}, "disable_statistics": {"runtimeValue": {"constantValue": {"intValue": "0"}}}, "force_tf_compat_v1": {"runtimeValue": {"constantValue": {"intValue": "0"}}}, "module_file": {"runtimeValue": {"constantValue": {"stringValue": "preprocess.py"}}}}}, "taskInfo": {"name": "DataTransformer"}}, "ExampleValidator": {"componentRef": {"name": "ExampleValidator"}, "dependentTasks": ["SchemaImporter", "StatisticsGen"], "inputs": {"artifacts": {"schema": {"taskOutputArtifact": {"outputArtifactKey": "result", "producerTask": "SchemaImporter"}}, "statistics": {"taskOutputArtifact": {"outputArtifactKey": "statistics", "producerTask": "StatisticsGen"}}}, "parameters": {"exclude_splits": {"runtimeValue": {"constantValue": {"stringValue": "[]"}}}}}, "taskInfo": {"name": "ExampleValidator"}}, "ModelEvaluator": {"componentRef": {"name": "ModelEvaluator"}, "dependentTasks": ["TrainDataGen", "Trainer"], "inputs": {"artifacts": {"examples": {"taskOutputArtifact": {"outputArtifactKey": "examples", "producerTask": "TrainDataGen"}}, "model": {"taskOutputArtifact": {"outputArtifactKey": "model", "producerTask": "Trainer"}}}, "parameters": {"eval_config": {"runtimeValue": {"constantValue": {"stringValue": "{\n  \"metrics_specs\": [\n    {\n      \"metrics\": [\n        {\n          \"class_name\": \"SparseCategoricalAccuracy\",\n          \"threshold\": {\n            \"value_threshold\": {\n              \"lower_bound\": 0.5,\n              \"upper_bound\": 0.99\n            }\n          }\n        },\n        {\n          \"class_name\": \"ExampleCount\"\n        }\n      ]\n    }\n  ],\n  \"model_specs\": [\n    {\n      \"label_key\": \"Cover_Type\"\n    }\n  ],\n  \"slicing_specs\": [\n    {},\n    {\n      \"feature_keys\": [\n        \"Wilderness_Area\"\n      ]\n    }\n  ]\n}"}}}, "example_splits": {"runtimeValue": {"constantValue": {"stringValue": "null"}}}}}, "taskInfo": {"name": "ModelEvaluator"}}, "Pusher": {"componentRef": {"name": "Pusher"}, "dependentTasks": ["ModelEvaluator", "Trainer"], "inputs": {"artifacts": {"model": {"taskOutputArtifact": {"outputArtifactKey": "model", "producerTask": "Trainer"}}, "model_blessing": {"taskOutputArtifact": {"outputArtifactKey": "blessing", "producerTask": "ModelEvaluator"}}}, "parameters": {"custom_config": {"runtimeValue": {"constantValue": {"stringValue": "null"}}}, "push_destination": {"runtimeValue": {"constantValue": {"stringValue": "{\n  \"filesystem\": {\n    \"base_directory\": \"gs://jkwst1-bucket/models/Covertype\"\n  }\n}"}}}}}, "taskInfo": {"name": "Pusher"}}, "SchemaGen": {"componentRef": {"name": "SchemaGen"}, "dependentTasks": ["StatisticsGen"], "inputs": {"artifacts": {"statistics": {"taskOutputArtifact": {"outputArtifactKey": "statistics", "producerTask": "StatisticsGen"}}}, "parameters": {"exclude_splits": {"runtimeValue": {"constantValue": {"stringValue": "[]"}}}, "infer_feature_shape": {"runtimeValue": {"constantValue": {"intValue": "1"}}}}}, "taskInfo": {"name": "SchemaGen"}}, "SchemaImporter": {"componentRef": {"name": "SchemaImporter"}, "inputs": {"parameters": {"artifact_uri": {"runtimeValue": {"constantValue": {"stringValue": "gs://jkwst1-bucket/tfx/schema"}}}, "reimport": {"runtimeValue": {"constantValue": {"intValue": "0"}}}}}, "taskInfo": {"name": "SchemaImporter"}}, "StatisticsGen": {"componentRef": {"name": "StatisticsGen"}, "dependentTasks": ["TrainDataGen"], "inputs": {"artifacts": {"examples": {"taskOutputArtifact": {"outputArtifactKey": "examples", "producerTask": "TrainDataGen"}}}, "parameters": {"exclude_splits": {"runtimeValue": {"constantValue": {"stringValue": "[]"}}}}}, "taskInfo": {"name": "StatisticsGen"}}, "TrainDataGen": {"componentRef": {"name": "TrainDataGen"}, "inputs": {"parameters": {"input_base": {"componentInputParameter": "data_root_uri"}, "input_config": {"runtimeValue": {"constantValue": {"stringValue": "{\n  \"splits\": [\n    {\n      \"name\": \"single_split\",\n      \"pattern\": \"*\"\n    }\n  ]\n}"}}}, "output_config": {"runtimeValue": {"constantValue": {"stringValue": "{\n  \"split_config\": {\n    \"splits\": [\n      {\n        \"hash_buckets\": 4,\n        \"name\": \"train\"\n      },\n      {\n        \"hash_buckets\": 1,\n        \"name\": \"eval\"\n      }\n    ]\n  }\n}"}}}, "output_data_format": {"runtimeValue": {"constantValue": {"intValue": "6"}}}}}, "taskInfo": {"name": "TrainDataGen"}}, "Trainer": {"componentRef": {"name": "Trainer"}, "dependentTasks": ["DataTransformer", "SchemaImporter"], "inputs": {"artifacts": {"examples": {"taskOutputArtifact": {"outputArtifactKey": "transformed_examples", "producerTask": "DataTransformer"}}, "schema": {"taskOutputArtifact": {"outputArtifactKey": "result", "producerTask": "SchemaImporter"}}, "transform_graph": {"taskOutputArtifact": {"outputArtifactKey": "transform_graph", "producerTask": "DataTransformer"}}}, "parameters": {"custom_config": {"runtimeValue": {"constantValue": {"stringValue": "null"}}}, "eval_args": {"runtimeValue": {"constantValue": {"stringValue": "{\"num_steps\": 500}"}}}, "module_file": {"runtimeValue": {"constantValue": {"stringValue": "train.py"}}}, "train_args": {"runtimeValue": {"constantValue": {"stringValue": "{\"num_steps\": 1000}"}}}}}, "taskInfo": {"name": "Trainer"}}}}, "inputDefinitions": {"parameters": {"data_root_uri": {"type": "STRING"}}}}, "schemaVersion": "2.0.0", "sdkVersion": "tfx-1.0.0-rc1"}, "runtimeConfig": {"gcsOutputDirectory": "gs://jkwst1-bucket/pipelines/covertype-continuous-training"}}